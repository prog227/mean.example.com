var usersApp=function(){function e(e,n,t){let a=document.getElementById(e);a.addEventListener("submit",function(e){e.preventDefault();let s=new FormData(a),r=`${window.location.origin}${n}`,i=new XMLHttpRequest;i.open(t,r),i.setRequestHeader("Content-Type","application/json; charset=UTF-8");let d={};s.forEach(function(e,n){d[n]=e}),i.send(JSON.stringify(d)),i.onload=function(){!0===JSON.parse(i.response).success?window.location.href="/users/app":document.getElementById("formMsg").style.display="block"}})}return{deleteUser:function(e){!function(e){let n=`${window.location.origin}/api/users/${e}`,t=new XMLHttpRequest;t.open("DELETE",n),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){!0===JSON.parse(t.response).success?window.location.hash="#":alert("Unknown error, the user could not be deleted")}}(e)},load:function(){let n=window.location.hash.split("-");switch(n[0]){case"#create":document.getElementById("app").innerHTML='\n          <div class="card">\n            <div class="card-header clearfix">\n              <h2 class="h3 float-left">Create a New User</h2>\n              <div class="float-right">\n                <a href="#" class="btn btn-primary">Cancel</a>\n              </div>\n            </div>\n            <div class="card-body">\n              <form id="createUser" class="card-body">\n                <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n  \n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="first_name">First Name</label>\n                    <input type="text" id="first_name" name="first_name" class="form-control" required>\n                  </div>\n  \n                  <div class="form-group col-md-6">\n                    <label for="last_name">Last Name</label>\n                    <input type="text" id="last_name" name="last_name" class="form-control" required>\n                  </div>\n                </div>\n  \n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="username">Username</label>\n                    <input type="text" id="username" name="username" class="form-control" required>\n                  </div>\n  \n                  <div class="form-group col-md-6">\n                    <label for="email">Email</label>\n                    <input type="email" id="email" name="email" class="form-control" required>\n                  </div>\n                </div>\n  \n                <div class="text-right">\n                  <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n                </div>\n              </form>\n            </div>\n          </div>\n      ',e("createUser","/api/users","POST");break;case"#view":!function(e){let n=`${window.location.origin}/api/users/${e}`,t=new XMLHttpRequest;t.open("GET",n),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response),a="";a=`<div class="card">\n          <div class="card-header clearfix">\n            <h2 class="h3 float-left">${n.user.first_name} ${n.user.last_name}</h2>\n            <div class="float-right">\n              <a href="#edit-${n.user._id}" class="btn btn-primary">Edit</a>\n            </div>\n          </div>\n          <div class="card-body">\n            <div>${n.user.username}</div>\n            <div>${n.user.email}</div>\n          </div>\n        </div>`,e.innerHTML=a}}(n[1]);break;case"#edit":!function(n){let t=`${window.location.origin}/api/users/${n}`,a=new XMLHttpRequest;a.open("GET",t),a.setRequestHeader("Content-Type","application/json; charset=UTF-8"),a.send(),a.onload=function(){let n=document.getElementById("app"),t=JSON.parse(a.response);var s=`\n          <div class="card">\n            <div class="card-header clearfix">\n              <h2 class="h3 float-left">Edit</h2>\n              <div class="float-right">\n                <a href="#" class="btn btn-primary">Cancel</a>\n              </div>\n            </div>\n            <div class="card-body">\n              <form id="editUser" class="card-body">\n                <input type="hidden" id="_id" name="_id" value="${t.user._id}">\n                <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n  \n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="first_name">First Name</label>\n                    <input type="text" id="first_name" name="first_name" class="form-control" value="${t.user.first_name}" required>\n                  </div>\n  \n                  <div class="form-group col-md-6">\n                    <label for="last_name">Last Name</label>\n                    <input type="text" id="last_name" name="last_name" class="form-control" value="${t.user.last_name}" required>\n                  </div>\n                </div>\n  \n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="username">Username</label>\n                    <input type="text" id="username" name="username" class="form-control" value="${t.user.username}" required>\n                  </div>\n  \n                  <div class="form-group col-md-6">\n                    <label for="email">Email</label>\n                    <input type="email" id="email" name="email" class="form-control" value="${t.user.email}" required>\n                  </div>\n                </div>\n  \n                <div class="text-right">\n                  <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n                </div>\n              </form>\n            </div>\n          </div>\n          <div>\n            <a href="#delete-${t.user._id}" class="btn text-danger">Delete</a>\n          </div>\n        `;n.innerHTML=s,e("editUser","/api/users","PUT")}}(n[1]);break;case"#delete":!function(e){let n=`${window.location.origin}/api/users/${e}`,t=new XMLHttpRequest;t.open("GET",n),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response),a="";a=`<div class="card bg-transparent border-danger text-danger bg-danger">\n          <div class="card-header bg-transparent border-danger">\n            <h2 class="h3 text-center">You Are About to Delete a User</h2>\n          </div>\n          <div class="card-body text-center">\n            <div>\n              Are you sure you want to delete\n              <strong>${n.user.first_name} ${n.user.last_name}</strong>?\n            </div>\n  \n            <div>Username: <strong>${n.user.username}</strong></div>\n            <div>Email: <strong>${n.user.email}</strong></div>\n  \n            <div class="text-center">\n              <br>\n              <a onclick=extends ../layout\n  \n              block content\n                h1 Create an Article\n                form(method='post' action='/users/articles')\n                  div\n                    label(for='title') Title\n                    input(type='text' name='title' id='title')\n                  div\n                    label(for='slug') Slug\n                    input(type='text' name='slug' id='slug')\n                  div\n                    label(for='keywords') Keywords\n                    input(type='text' name='keywords' id='keywords')\n                  div\n                    label(for='description') Description\n                    input(type='text' name='description' id='description')\n                  div\n                    label(for='body') Body\n                    input(type='text' name='body' id='body')\n                  div\n                    label(for='created') Created\n                    input(type='text' name='created' id='created')\n                  div\n                    label(for='modified') Modified\n                    input(type='text' name='modified' id='modified')\n                  div\n                    label(for='published') Published\n                    input(type='text' name='published' id='published')\n                  div\n                    input(type='submit' value='submit')"usersApp.deleteUser('${n.user._id}');" class="btn btn-lg btn-danger text-white">\n                Yes delete ${n.user.username}\n              </a>\n  \n              <br><br><br>\n              <a class="btn text-muted" href="#users">cancel</a>\n            </div>\n  \n          </div>\n        </div>`,e.innerHTML=a}}(n[1]);break;default:!function(){let e=`${window.location.origin}/api/users`,n=new XMLHttpRequest;n.open("GET",e),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response).users,a="",s="";for(let e=0;e<t.length;e++)s+=`<tr>\n            <td>\n              <a href="#view-${t[e]._id}">${t[e].last_name}, ${t[e].first_name}</a>\n            </td>\n            <td>${t[e].username}</td>\n            <td>${t[e].email}</td>\n          </tr>`;a=`<div class="card">\n          <div class="card-header clearfix">\n            <h2 class="h3 float-left">Users</h2>\n            <div class="float-right">\n              <a href="#create" class="btn btn-primary">New User</a>\n            </div>\n          </div>\n          <div class="table-responsive">\n            <table class="table table-striped table-hover table-bordered">\n              <thead>\n                <tr>\n                  <td>Name</td>\n                  <td>Username</td>\n                  <td>Email</td>\n                </tr>\n              </thead>\n              <tbody>${s}</tbody>\n            </table>\n          </div>\n        </div>`,e.innerHTML=a}}()}}}}();usersApp.load(),window.addEventListener("hashchange",function(){usersApp.load()});