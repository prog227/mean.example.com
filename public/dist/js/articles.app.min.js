var articlesApp=function(){function e(e){let n=`${window.location.origin}/api/articles/${e}`,t=new XMLHttpRequest;t.open("GET",n),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response);var i=`\n         <div class="card">\n         <div class="card-header clearfix">\n           <h2 class="h3 float-left">Edit Post</h2>\n           <div class="float-right">\n             <a href="#" class="btn btn-primary">Cancel</a>\n           </div>\n         </div>\n         <div class="card-body">\n           <form id="editArticle" class="card-body">\n             <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n\n             <div class="row">\n               <div class="form-group col-md-6">\n                 <label for="title">Title</label>\n                 <input type="text" id="title" name="title" class="form-control" value="${n.article.title}" required>\n               </div>\n               <div class="form-group col-md-6">\n                 <label for="published">Published On</label>\n                 <input type="datetime-local" id="published" name="published" class="form-control" value="${date}" required>\n               </div>\n             </div>\n\n             <div class="row">\n               <div class="form-group col-md">\n                 <label for="body">Body</label>\n                 <textarea id="body" name="body" class="form-control" rows="6" required>${n.article.body}</textarea>\n               </div>\n             </div>\n\n             <div class="row">\n               <div class="form-group col-md-6">\n                 <label for="description">Summary</label>\n                 <input type="text" id="description" name="description" class="form-control" value="${n.article.description}" required>\n               </div>\n\n               <div class="form-group col-md-6">\n                 <label for="keywords">Keywords (separated by commas)</label>\n                 <input type="text" id="keywords" name="keywords" class="form-control" value="${n.article.keywords}" required>\n               </div>\n             </div>\n             <div>\n               <input type="hidden" id="_id" name="_id" class="form-control" value="${n.article._id}" required>\n             </div>\n             <div>\n               <input type="hidden" id="created" name="created" class="form-control" value="${n.article.created}" required>\n             </div>\n\n             <div class="text-right">\n               <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n             </div>\n           </form>\n         </div>\n         <div>\n           <a href="#delete-${n.article._id}" class="text-danger">Delete</a>\n         </div>\n       </div>\n\n `;e.innerHTML=i,function(e,n,t){let i=document.getElementById(e);i.addEventListener("submit",function(e){e.preventDefault();let a=new FormData(i),r=`${window.location.origin}${n}`,d=new XMLHttpRequest;d.open(t,r),d.setRequestHeader("Content-Type","application/json; charset=UTF-8");let l={};a.forEach(function(e,n){l[n]=e}),d.send(JSON.stringify(l)),d.onload=function(){let e=JSON.parse(d.response);!0===e.success?window.location.href="/articles/app":document.getElementById("formMsg").style.display="block"}})}("editArticle","/api/articles","PUT")}}function n(e){let n=`${window.location.origin}/api/users/${e}`,t=new XMLHttpRequest;t.open("DELETE",n),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){!0===JSON.parse(t.response).success?window.location.hash="#":alert("Unknown error, the user could not be deleted")}}return{load:function(){let t=window.location.hash.split("-");switch(t[0]){case"#create":document.getElementById("app").innerHTML='\n          <div class="card">\n            <div class="card-header clearfix">\n              <h2 class="h3 float-left">New Post</h2>\n              <div class="float-right">\n                <a href="#" class="btn btn-primary">Cancel</a>\n              </div>\n            </div>\n            <div class="card-body">\n              <form id="createArticle" class="card-body">\n                <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n  \n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="title">Title</label>\n                    <input type="text" id="title" name="title" class="form-control" required>\n                  </div>\n                  <div class="form-group col-md-6">\n                    <label for="published">Publish On</label>\n                    <input type="datetime-local" id="published" name="published" class="form-control" required>\n                  </div>\n                </div>\n  \n                <div class="row">\n                  <div class="form-group col-md">\n                    <label for="body">Body</label>\n                    <textarea id="body" name="body" class="form-control" rows="6" required></textarea>\n                  </div>\n                </div>\n  \n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="description">Summary</label>\n                    <input type="text" id="description" name="description" class="form-control" required>\n                  </div>\n  \n                  <div class="form-group col-md-6">\n                    <label for="keywords">Keywords (separated by commas)</label>\n                    <input type="text" id="keywords" name="keywords" class="form-control" required>\n                  </div>\n                </div>\n  \n                <div class="text-right">\n                  <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n                </div>\n              </form>\n            </div>\n          </div>\n      ',postArticle("createArticle","/api/articles");break;case"#view":!function(e){let n=`${window.location.origin}/api/articles/${e}`,t=new XMLHttpRequest;t.open("GET",n),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response),i="";i=`<div class="card">\n           <div class="card-header clearfix">\n             <h2 class="h3 float-left">${n.article.title}</h2>\n             <div class="float-right">\n               <a href="#edit-${n.article._id}" class="btn btn-primary">Edit</a>\n             </div>\n           </div>\n           <div class="card-body">\n            <div class="blockquote">${n.article.body}</div>\n            <br>\n            <div>Tagged: <em>${n.article.keywords}</em></div>\n           </div>\n         </div>`,e.innerHTML=i}}(t[1]);break;case"#edit":e(t[1]);break;case"#delete":n(t[1]);break;default:!function(){let e=`${window.location.origin}/api/articles`,n=new XMLHttpRequest;n.open("GET",e),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response).articles,i="",a="";for(let e=0;e<t.length;e++)a+=`<tr>\n            <td>\n              <a href="#view-${t[e]._id}">${t[e].title}, ${t[e].description}</a>\n            </td>\n            <td>${t[e].title}</td>\n            <td>${t[e].description}</td>\n          </tr>`;i=`<div class="card">\n        <div class="card-header clearfix">\n          <h2 class="h3 float-left">Posts</h2>\n          <div class="float-right">\n            <a href="#create" class="btn btn-primary">New Post</a>\n          </div>\n        </div>\n        <div class="table-responsive">\n          <table class="table table-striped table-hover table-bordered">\n            <thead>\n              <tr>\n                <td>Title</td>\n                <td>Description</td>\n                <td>Date Published</td>\n              </tr>\n            </thead>\n            <tbody>${a}</tbody>\n          </table>\n        </div>\n      </div>`,e.innerHTML=i}}()}},deleteArticle:function(e){n(e)}}}();usersApp.load(),window.addEventListener("hashchange",function(){usersApp.load()});